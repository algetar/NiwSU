Number spelling (in words) Utility NiwSU
Copyright (C) 2019  Gennady Tatarnikov <ta_gena@mail.ru>

Утилита представления числа и исчисляемого прописью.
Данная версия утилиты работает в составе Yii2 Framework.

Использование
use app\components\tgtools\speller\TGS;

string TGS::spell($value, $item, $format)
$value перменная любого типа
$item исчисляемое, необязательный параметр
    Строка в виде @c.x
    @ - опционально, означает имя группы, иначе имя шабона.
    .x - опционально, если указано, то х это число, означающее сокращение 
    наименования исчисляемого до х букв.
    Примеры:
    spell(1102002.23, '@кг')
     результат: одна тысяча сто две ТОННЫ два ЦЕЛЫХ двадцать три сотых килограмма;
     тоже для целого числа:
    spell(1102002, '@кг')
     результат: одна тысяча сто две ТОННЫ два килограмма;
     тоже для целого числа без группы:
    spell(1102002, 'кг')
     результат: один миллион сто две тысячи два килограмма;
    spell(5034.02, '@руб')
     результат: пять тысяч тридцать четыре рубля две копейки
     тоже самое с сокращением
     spell(5034.02, '@руб.3')
     результат: пять тысяч тридцать четыре руб. две коп.

$format формат представления данных
    Форматная строка, которая будет использована в функции
    string vsprintf($format, array $values)
    Число в ходе анализа представляется в виде:
    [
     //целое число/целая часть числа
     0 - целая часть числа прописью, элемент 1$
     1 - исчисляемое целой части числа, элемент 2$
     2 - целая часть числа, элемент 3$
     //дробная часть числа
     3 - дробная часть числа прописью, элемент 4$
     4 - исчисляемое дробной части числа, элемент 5$
     5 - дробная часть числа, элемент 6$
    ]
    Примеры:
    spell(25, 'экз', 'документ составлен в количестве: %3$04d %2$s')
     результат: документ составлен в количестве: 0025 экземпляров
     тоже самое с другим элементом в форматной строке
    spell(21, 'экз', 'документ составлен в количестве: %1$s %2$s')
     результат: документ составлен в количестве: двадцать один экземпляр
    spell(5034.02, '@руб', 'итого %1$s %2$s, %6$02d %5$s')
     результат: итого пять тысяч тридцать четыре рубля, 02 копейки

Структура

В данной версии все исходные данные берутся из хранилища @app\web\data-store\title-objects.
decimal-names.php наименование разрядов дробной части числа
digit-names.php имена числительные
number-names.php наименования чисел
item-names.php исчисляемые объекты
item-groups.php группы исчисляемых объектов
Путь к имени хранилища задается в common/utilities.php,
константы DATASTORE_PATH, DATASTORE_TITLES.

Итак строка 102.02 грамма, состоит из числа 102.02 и исчисляемого ГРАММ.
Исчисляемые представленны классом Items. Само число сотоит из двух частей:
целой (класс Integer) и дробной частей (класс Decimals). 
И целая часть, и дробная часть числа произносятся как целые числа:
число делится на разряды по 3 цифры слева направо, в комментариях именуются
"разрядами", класс SumDigits. 
Разряд произносится так, 122 => сто, двадцать, два. 
Числа сто, двадцать, два и т.д. в комментариях именуются "базовами числами",
Управляются классом PrimeNumberTitles, хранилище number-names.php.

Каждому разряду присваивается индекс от 0 и выше и соотностся с соответсвующим
именем числительным DigitNameTitles, хранилище digit-names.php. Нулевой разряд
соотносится с исчисляемым. Для этого запись заданого исчисляемого (класс Items,
хранилище item-names.php) добавляется в начало списка DigitNameTitles. Все 
разряды числа собираются в единое целое в классе Integer. Дробная часть числа
произносится в Decimals. Число десятичной части произносится как целое класс Integer
а нулевой разряд соотносится c наименованием разрядов дробной части числа 
DecimalTitles, хранилище decimal-names.php. 





